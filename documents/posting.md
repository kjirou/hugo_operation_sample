# :writing_hand: おブログ記事を投稿する
## :tipping_hand_woman: 全体のお流れ

投稿から公開までのお流れは、大まかには以下のようになりますわ。

1. 投稿者が、お記事を Markdown おファイルとして作成いたしますわ。
2. 投稿者が、本リポジトリに対して、Pull-Request でそちらの Markdown おファイルを提出いたしますわ。
3. 運営者が、お記事をレビューいたしますわ。運営者から修正の依頼があれば、投稿者は対応いたしますわ。
4. 運営者が、お記事を公開いたしますわ。

## :rocket: 執筆環境を構築する
### PC へおインストールが必要なおソフトウェア

[Docker](https://www.docker.com/) のおインストールをしてくださいまし。  
実際に使うおソフトウェアは [Hugo](https://gohugo.io/) というおブログエンジンですわが、そちらを Docker 経由で動かしますわ。

### おアプリケーションのおインストール

```
git clone git@github.com:kjirou/hugo_operation_sample.git
```

## :black_nib: お記事を執筆する
### お記事のお雛形を作る

```
cd /path/to/hugo_operation_sample
make hugo_new
```

こちらの後に入力するお記事のおファイル名が、公開 URL の Slug になりますわ。

### おプレビュー環境を起動する

```
cd /path/to/hugo_operation_sample
make hugo_server
```

起動したら、 http://localhost:1313/ をおブラウザで開いてくださいまし。

### Front Matter を設定する

まずは、以下の Front Matter お部分の設定をしてくださいまし。

```
---
title: "Hello World"
date: 2022-01-01 09:00:00
authors:
  - 投稿者名
---
```

- `title`
  - いわゆるおタイトルですわ。公開時に `<title>` や `<h1>` などへ展開されますわ。
  - お文字数のお上限は特にありません。
- `date`
  - 公開日時として表示されますわ。
  - 提出時は、お初期値のままで良いですわ。
  - 投稿者からの要求がなければ、お最終的なお値は運営者により設定されますわ。
- `authors`
  - 投稿者名として表示されますわ。お実名でなくても構いません。
  - お匿名を希望するときは、`チームで決めたおデフォルトのお名前` と設定してくださいまし。
  - 1 つのみ設定できますわ。

### お本文を書く

- Markdown のお記法は、お基本的には [GitHub Flavored Markdown](https://github.github.com/gfm/) に準拠していますわ。
- お画像を置くときのお構文は、`![{任意でaltお属性}](/external/posts/{記事の投稿年}/{記事のおファイル名}/{自由なお画像名}.{拡張子})` ですわ。
- お外部コンテンツを埋め込むときのお構文は、`{{< おコンテンツに相当するShortcodesのお名前 お引数1 お引数2 ... >}}` ですわ。
  - 対応しているおコンテンツのお種類は、[Hugo のおビルトインに含まれているもの](https://gohugo.io/content-management/shortcodes/) と [独自に対応しているもの](/layouts/shortcodes) ですわ。
  - お引数については、Shortcode のお元になっている各コンテンツを埋め込むための HTML おコードを見て、推測してくださいまし。
    - なお、独自対応に含まれている Speaker Deck は、普通に URL に含まれているお識別子っぽいお部分ではなく、Embed をするためのおコードに含まれている `data-id` を使いますわ。
- レビューの指摘を減らすために、お本文を書く前に [内容についてのおガイドライン](/documents/content-guidelines.md) を一読願いますわ。

## :mailbox_with_mail: お記事を提出する

- Pull-Request の各属性値を以下のように設定してくださいまし。
  - おタイトルへ `title` と同じお文章を設定いたしますわ。
  - Assignees へお自分を設定いたしますわ。
  - Open を設定いたしますわ。
    - Draft で Pull-Request を作成することも可能ですわ。そちらのときは、運営者は未完成として認識いたしますわ。
- CI で、お記事のお内容についてのお定型的な検証を行っていますわ。
  - もし、`validate-posts` の Workflow が失敗していたら、CI の出力を確認して修正してくださいまし。
  - その他の Workflow が失敗していたら、お不慮のエラーの可能性がありますため、開発者までご一報くださいまし。
- 提出後は、Reviewers へ登録されている運営者たちによるレビューが行われますわ。
  - お一般的な Pull-Request のお作法に準拠して、指摘された点を解決してくださいまし。
  - 指摘された点を全てお解決をいたしますわ、特に指摘がないときは誰のおひとりから Approve をもらえば完了ですわ。
- お基本的に、rebase や force-push は禁止ですわ。運営者側のレビューが行いにくくなるためですわ。実行するときは、お事前に運営者へ確認してくださいまし。

## :soon: その後

- 運営者によってお記事の公開作業が行われますわ。
- もちろん、公開後の修正も可能ですわ。そちらのときも、お一般的な Pull-Request のお作法に準拠して修正を行ってくださいまし。

投稿いただき、ありがとうございますわございおりましたわ❗❗
